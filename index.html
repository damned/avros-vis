<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>System Visualisation</title>
    <meta name="description" content="VR system visualisation example using a-frame.js">
    <script src="https://aframe.io/releases/1.2.0/aframe.min.js"></script>
    <script crossorigin src="https://unpkg.com/lodash@1.3.0/dist/lodash.min.js"></script>
    <script src="src/aframe-utils.js"></script>
    <script src="src/balloon-label.js"></script>
    <script src="src/split.js"></script>
    <script src="src/placement.js"></script>
    <script src="src/edge.js"></script>
    <script type="application/javascript">
      aframeUtils.log.includeCaller = true
    </script>
  </head>
  <body>
    <a-scene>
      <a-assets>
        <a-mixin id="srv" geometry="primitive: box; height: 0.05; depth: 0.05; width: 0.05"></a-mixin>
        <a-mixin id="dbt" geometry="primitive: cylinder; height: 0.2; radius: 0.1"></a-mixin>
      </a-assets>

      <a-entity position="0 0 -1">

        
        
        <a-entity id="main-display" class="display" position="0 1 -0.5" scale="0.5 0.5 0.5">

          <a-box id="sng" class="sn" color="#585" wireframe="false"
                 placement="on: #main-board"
                 scale="0.42 0.02 0.92"></a-box>
          <a-box class="sn" color="#855" 
                 placement="on: #main-board"
                 scale="0.42 0.02 0.92"></a-box>

          <a-box id="nlb" placement="on: #sng" balloon-label="label: nlb" color="#444" mixin="srv"></a-box>

          <a-box id="ag" balloon-label="label: ag" color="#444" mixin="srv" position="1 0.5 0.7"></a-box>

          <a-box id="age-1" color="#444" mixin="srv" position="0.4 0.025 0.5"
                 edge="from: #nlb; color: pink" 
                 edge__1="to: #ag; color: pink" ></a-box>
          <a-box id="age-2" color="#444" mixin="srv" position="0.4 0.025 0.6"
                 edge="from: #nlb; color: pink" 
                 edge__1="to: #ag; color: pink"></a-box>

          <a-entity edge="to: #nlb; color: pink" balloon-label="label: fus; scale: 0.6" geometry="primitive: octahedron; radius: 0.2" material="color: pink" position="-0.6 0.05 -1.4"></a-entity>

          <a-box id="lam" edge="from: #ag; color: pink" balloon-label="label: lam" color="#444" mixin="srv" position="1 0.5 0.1"></a-box>

          <a-box id="trg" color="red"  balloon-label="label: tr g" mixin="srv" position="0.1 0.025 0.7"
                 edge="to: #es; color: orange" 
                 ></a-box>
          <a-box id="reg" color="green" balloon-label="label: re g; y-offset: -0.1" mixin="srv" position="0.2 0.025 0.8"
                 edge="to: #es; color: orange" 
                 edge__2="to: #rev; color: orange"
                 ></a-box>
          <a-box id="tog" color="blue"  balloon-label="label: to g; y-offset: -0.2" mixin="srv" position="0.3 0.025 0.9"
                 edge="to: #es; color: orange" 
                 edge__2="to: #tool; color: orange"
                 ></a-box>



          <a-box id="es" edge="from: #lam; color: pink" balloon-label="label: es" color="#77a" position="0.2 0.025 0.25" width="0.2" height="0.01" depth="0.3"></a-box>
          <a-box color="#558" placement="on: #es"></a-box>
          <a-box color="#558" placement="on: #es"></a-box>
          <a-box color="#558" placement="on: #es"></a-box>
          <a-box color="#558" placement="on: #es"></a-box>
          <a-box color="#558" placement="on: #es"></a-box>

          <a-plane id="main-board" class="display-board" color="gray" position="0 0 0.5" rotation="-90 0 0"></a-plane>
        </a-entity>

        <a-entity id="trg-to-tr" line="start:     0.05 1.025 -0.15; end: -0.5 1.025 -0.15; color: orange"
                                 line__2="start: -0.5  1.025 -0.15; end: -0.5 1.025 -0.7; color: orange"
                                 line__3="start: -0.5  1.025 -0.7;  end: -1   1.025 -0.7; color: orange"></a-entity>

        <a-entity id="tr-display" class="display" position="-1 1 -1" scale="0.5 0.5 0.5">

          <a-entity balloon-label="label: srvc" color="#444" mixin="dbt" placement="on: #tr-display-board"></a-entity>
          <a-entity balloon-label="label: unit" color="#444" mixin="dbt" placement="on: #tr-display-board"></a-entity>

          <a-entity balloon-label="label: pric" color="#444" mixin="dbt" placement="on: #tr-display-board"></a-entity>
          <a-entity balloon-label="label: feat" color="#444" mixin="dbt" placement="on: #tr-display-board"></a-entity>

          <a-plane id="tr-display-board" class="display-board" color="#399" position="0 0 0.5" rotation="-90 0 0"></a-plane>
        </a-entity>

        <a-entity id="tool" balloon-label="label: tool; scale: 0.3" mixin="dbt" material="color: orange" position="-1 1.025 -0.05" scale="0.5 0.5 0.5"></a-entity>

        <a-cone id="rev" balloon-label="label: rev; scale: 0.3" color="#444" position="1 1.025 -0.1" scale="0.1 0.1 0.1"></a-cone>

      </a-entity>
        dw
      <a-entity hand-controls="hand: left; handModelStyle: lowPoly"></a-entity>
      <a-entity hand-controls="hand: right; handModelStyle: lowPoly"></a-entity>
    </a-scene>
    <script>
      // let builder = ModelBuilder(document.querySelector('a-scene'))
    </script>
  </body>
</html>